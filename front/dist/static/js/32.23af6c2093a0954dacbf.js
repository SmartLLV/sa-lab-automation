webpackJsonp([32],{"8XuS":function(t,e,a){var n=a("fFn2");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("8aef0316",n,!0,{})},chvr:function(t,e,a){"use strict";function n(t){a("8XuS")}Object.defineProperty(e,"__esModule",{value:!0});var o=a("Dd8w"),r=a.n(o),i=a("NYxO"),s=a("cD3F"),c=a("pN2o"),l={data:function(){return{dialogVisible:!1,payLocation:"",orderCode:0}},computed:r()({},Object(i.c)("user",["cartList","userInfo"]),{form:function(){return{remarks:"",acceptAddress:this.userInfo.acceptAddress}},totalMoney:function(){var t=s.a.accMul,e=s.a.accAdd,a=0;return this.cartList.forEach(function(n){a=e(a,t(n.num,n.dishPrice))}),a}}),methods:{onSubmit:function(){var t=this,e=this.userInfo.userId,a=void 0,n=void 0,o=this.cartList.filter(function(t){return t.dishType}).map(function(t){return a=t.shopId,n=t.shopName,{dishId:t.dishId,dishName:t.dishName,dishNum:t.num,dishPrice:t.dishPrice}}),r=this.totalMoney,i=this.form,s=i.remarks,l=i.acceptAddress;if(!a||!e)return this.$message({type:"error",message:"操作失败"}),!1;Object(c.q)(a,n,e,o,r,s,l).then(function(e){1===e.code&&(t.orderCode=e.data,Object(c.r)(e.data).then(function(e){t.dialogVisible=!0,t.payLocation=e.data,window.open(e.data)}))})},handleClick:function(){var t=this,e=this.orderCode;Object(c.k)(e).then(function(e){1===e.code?t.$router.push("/shopCart/success"):t.$message({type:"error",message:"未检测到支付，请稍后"})})},handleClose:function(){var t=this;this.$confirm("确认取消支付?").then(function(e){t.$router.push("/order")}).catch(function(t){})}}},d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"checkout"},[a("div",{staticClass:"title"},[t._v("确认订单")]),t._v(" "),a("el-table",{staticStyle:{width:"50%",margin:"0 auto"},attrs:{data:t.cartList}},[a("el-table-column",{attrs:{prop:"dishName",label:"商品",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"num",label:"数量",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dishPrice",label:"单价"}})],1),t._v(" "),a("div",{staticClass:"total"},[t._v("\n    总计： "),a("span",{staticClass:"money"},[t._v(t._s(t.totalMoney))]),t._v("元   \n  ")]),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{model:{value:t.form.remarks,callback:function(e){t.$set(t.form,"remarks",e)},expression:"form.remarks"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{model:{value:t.form.acceptAddress,callback:function(e){t.$set(t.form,"acceptAddress",e)},expression:"form.acceptAddress"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即支付")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("请支付完后点击我已支付,若已支付请点击‘我已支付’")]),t._v(" "),a("a",{staticClass:"payLocation",attrs:{href:t.payLocation,target:"_blank"}},[t._v("若未正常跳转可点击手动跳转")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取消支付")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleClick}},[t._v("我已支付")])],1)])],1)},u=[],f={render:d,staticRenderFns:u},p=f,h=a("VU/8"),m=n,v=h(l,p,!1,m,"data-v-17d81aba",null);e.default=v.exports},fFn2:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.checkout[data-v-17d81aba] {\n  background: #fff;\n  padding-bottom: 20px;\n}\n.checkout .title[data-v-17d81aba] {\n    text-align: center;\n    padding: 20px;\n    font-size: 25px;\n}\n.total[data-v-17d81aba] {\n  width: 50%;\n  margin: 20px auto;\n  text-align: right;\n  color: red;\n}\n.total .money[data-v-17d81aba] {\n    font-size: 30px;\n}\n.el-form[data-v-17d81aba] {\n  width: 50%;\n  margin: 0 auto;\n}\n.payLocation[data-v-17d81aba] {\n  cursor: pointer;\n  color: red;\n}\n.payLocation[data-v-17d81aba]:hover {\n    text-decoration: underline;\n}\n",""])}});