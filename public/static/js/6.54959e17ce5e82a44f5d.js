webpackJsonp([6],{"2ML4":function(e,t,n){"use strict";function a(e){n("vaXf")}function s(e){n("I0rg")}Object.defineProperty(t,"__esModule",{value:!0});var i=n("Dd8w"),o=n.n(i),r=n("NYxO"),c=n("CjlA"),l=n("s8U1"),d={props:{info:{type:Object,default:{}}},mounted:function(){this.$refs["el-rate"].$el.querySelectorAll(".el-rate__icon").forEach(function(e){e.style.fontSize="14px"})},methods:{select:function(){this.$emit("select",this.info)}}},p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"shopCard clearfix",on:{click:e.select}},[n("img",{attrs:{src:e.info.shopLogo,width:"70",height:"70"}}),e._v(" "),n("div",{staticClass:"message"},[n("p",{staticClass:"name"},[e._v(e._s(e.info.shopName))]),e._v(" "),n("el-rate",{ref:"el-rate",attrs:{disabled:"","show-score":"","text-color":"#ff9900"},model:{value:e.info.level,callback:function(t){e.$set(e.info,"level",t)},expression:"info.level"}}),e._v(" "),n("p",{staticClass:"perMonth"},[e._v(e._s("月销"+(e.info.monthlySales||0)+"单"))]),e._v(" "),n("p",{staticClass:"dispatchCost"},[e._v(e._s("配送费￥"+e.info.shopDeliveryCost))])],1)])},h=[],f={render:p,staticRenderFns:h},u=f,g=n("VU/8"),v=a,m=g(d,u,!1,v,"data-v-9c13a8b4",null),x=m.exports,b=n("pN2o"),_={data:function(){return{pageNum:1,totalPage:1,loading:!1,name:"",shopType:1}},components:{searchBox:c.a,sellerFilter:l.a,shopCard:x},created:function(){var e=this;this.getList(),window.onscroll=function(){!e.loading&&e.__getScrollHeight()<=e.__getWindowHeight()+window.scrollY+100&&e.pageNum<e.totalPage&&(e.loading=!0,e.pageNum++,e.getList())}},beforeDestroy:function(){window.onscroll=null,this.clearShopList()},computed:o()({},Object(r.c)("user",["exactAddress","shopList","shopTypeList"])),watch:{$route:function(){"place"===this.$router.currentRoute.name&&this.getList()}},methods:o()({getList:function(){var e=this;this.loading=!0;var t=this.$router.currentRoute.query.name,n=this.exactAddress.location.lng,a=this.exactAddress.location.lat,s=this.pageNum,i=this.shopType;Object(b.g)(n,a,s,i,t).then(function(t){e.pageNum=t.data.pageNum,e.totalPage=t.data.totalPage,setTimeout(function(){e.loading=!1},50);var n=e.shopList.concat(t.data.shopBrieflys);e.setShopList(n)})},selectShop:function(e){this.$router.push("/shop/"+e.shopId)},filterSelect:function(e){this.pageNum=1,this.shopType=e,this.name="",this.clearShopList(),this.$router.push({path:"/place",query:{shopType:e,name:void 0,pageNum:void 0}})},search:function(e){this.name=e,this.pageNum=1,this.shopType=1,this.clearShopList(),this.$router.push({path:"/place",query:{shopType:void 0,name:this.name,pageNum:void 0}})},changeAddress:function(){this.clearExactAddress(),this.$router.push("/home")},__getScrollHeight:function(){var e=void 0,t=void 0;return document.body&&(e=document.body.scrollHeight),document.documentElement&&(t=document.documentElement.scrollHeight),e-t>0?e:t},__getWindowHeight:function(){return"CSS1Compat"===document.compatMode?document.documentElement.clientHeight:document.body.clientHeight}},Object(r.b)("user",["clearExactAddress"]),Object(r.d)({setShopList:"user/SET_SHOP_LIST",clearShopList:"user/CLEAR_SHOP_LIST"}))},y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"header clearfix"},[n("div",{staticClass:"address"},[n("span",[e._v("当前位置：")]),e._v(" "),n("span",[e._v(e._s(e.exactAddress&&e.exactAddress.name))]),e._v(" "),n("span",{staticClass:"changeAddress",on:{click:e.changeAddress}},[e._v("[切换地址]")])]),e._v(" "),n("search-box",{staticClass:"search",on:{search:e.search}})],1),e._v(" "),n("seller-filter",{staticClass:"filter",attrs:{filterList:e.shopTypeList},on:{select:e.filterSelect}}),e._v(" "),n("div",{staticClass:"content clearfix"},[e._l(e.shopList,function(t){return n("shop-card",{key:t.shopId,staticClass:"shopCard",attrs:{info:t},on:{select:e.selectShop}})}),e._v(" "),e.loading?n("div",{staticClass:"loading"},[n("i",{staticClass:"el-icon-loading"}),e._v("正在加载")]):e._e()],2)],1)},C=[],w={render:y,staticRenderFns:C},L=w,S=n("VU/8"),k=s,T=S(_,L,!1,k,"data-v-4fb7107c",null);t.default=T.exports},CpYD:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.filter[data-v-24a8834e] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  background: #fff;\n}\n.filter .label[data-v-24a8834e] {\n    -webkit-box-flex: 0;\n        -ms-flex: 0 0 100px;\n            flex: 0 0 100px;\n    padding: 5px;\n}\n.filter ul[data-v-24a8834e] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n}\n.filter ul li[data-v-24a8834e] {\n      padding: 5px 10px;\n      margin: auto 5px;\n      line-height: 20px;\n      font-size: 15px;\n      -webkit-transition: all .1s;\n      transition: all .1s;\n}\n.filter ul li[data-v-24a8834e]:hover {\n        background: #eee;\n        cursor: pointer;\n        border-radius: 3px;\n}\n.filter ul li.active[data-v-24a8834e] {\n        background: #dedede;\n}\n",""])},I0rg:function(e,t,n){var a=n("f6Nc");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("5d5358f2",a,!0,{})},f6Nc:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.container[data-v-4fb7107c] {\n  min-width: 1050px;\n}\n.container .header[data-v-4fb7107c] {\n    margin: 10px 0;\n}\n.container .header .address[data-v-4fb7107c] {\n      float: left;\n}\n.container .header .address .changeAddress[data-v-4fb7107c] {\n        cursor: pointer;\n}\n.container .header .address .changeAddress[data-v-4fb7107c]:hover {\n          color: #1e89e0;\n}\n.container .header .search[data-v-4fb7107c] {\n      float: right;\n}\n.container .filter[data-v-4fb7107c] {\n    border: 1px solid #eee;\n    padding: 15px;\n}\n.container .content[data-v-4fb7107c] {\n    min-height: 500px;\n    border: 1px solid #eee;\n    margin-top: 20px;\n    background: #fff;\n}\n.container .content .shopCard[data-v-4fb7107c] {\n      float: left;\n      width: 25%;\n}\n.container .content .loading[data-v-4fb7107c] {\n      margin: 20px auto;\n      text-align: center;\n}\n",""])},"gi+B":function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.shopCard[data-v-9c13a8b4] {\n  height: 118px;\n  padding: 20px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  -webkit-transition: all .1s;\n  transition: all .1s;\n  cursor: pointer;\n}\n.shopCard[data-v-9c13a8b4]:hover {\n    background: #eee;\n}\n.shopCard:hover .message .name[data-v-9c13a8b4] {\n    color: #006bc7;\n}\n.shopCard img[data-v-9c13a8b4] {\n    vertical-align: middle;\n    display: inline-block;\n}\n.shopCard .message[data-v-9c13a8b4] {\n    display: inline-block;\n    vertical-align: top;\n    margin-left: 10px;\n}\n.shopCard .message p[data-v-9c13a8b4] {\n      margin-top: 3px;\n}\n.shopCard .message .name[data-v-9c13a8b4] {\n      font-size: 15px;\n      font-weight: 600;\n}\n.shopCard .message .perMonth[data-v-9c13a8b4], .shopCard .message .dispatchCost[data-v-9c13a8b4] {\n      font-size: 13px;\n}\n",""])},rdQx:function(e,t,n){var a=n("CpYD");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("ef17b140",a,!0,{})},s8U1:function(e,t,n){"use strict";function a(e){n("rdQx")}var s={data:function(){return{activeTag:1}},props:{filterList:{type:Array,default:[]},filterMsg:{type:String,default:"商家分类"}},methods:{select:function(e){this.$emit("select",e),this.activeTag=e}}},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"filter"},[n("div",{staticClass:"label"},[e._v(e._s(e.filterMsg)+"：")]),e._v(" "),e.filterList.length?n("ul",e._l(e.filterList,function(t){return n("li",{key:t.shopTypeCode,class:{active:e.activeTag===t.shopTypeCode},on:{click:function(n){e.select(t.shopTypeCode)}}},[e._v(e._s(t.shopType))])}),0):e._e()])},o=[],r={render:i,staticRenderFns:o},c=r,l=n("VU/8"),d=a,p=l(s,c,!1,d,"data-v-24a8834e",null);t.a=p.exports},vaXf:function(e,t,n){var a=n("gi+B");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("8d666ca4",a,!0,{})}});