webpackJsonp([27],{FZvN:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.profile {\n  padding: 10px;\n  height: 100%;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  background: #fff;\n}\n.profile h1 {\n    font-size: 17px;\n    font-weight: 600;\n    margin: 20px;\n    text-align: center;\n}\n.profile .el-form {\n    width: 50%;\n    margin: 0 auto;\n}\n.profile .avatar-uploader .el-upload-dragger {\n    width: 100px;\n    height: 100px;\n}\n.profile .acceptAddress, .profile .address {\n    display: inline-block;\n}\n.profile .acceptAddress {\n    width: 65%;\n}\n.profile .address {\n    width: 30%;\n}\n",""])},"YDU+":function(e,t,n){var a=n("FZvN");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("609d428f",a,!0,{})},lUcd:function(e,t,n){"use strict";function a(e){n("YDU+")}Object.defineProperty(t,"__esModule",{value:!0});var o=n("mvHQ"),i=n.n(o),s=n("Dd8w"),r=n.n(s),l=n("pN2o"),c=n("NYxO"),d=n("OOMk"),f=d.a.user.upload,u={data:function(){return{info:{userName:"",avator:"",gender:"",introduction:"",phone:"",acceptAddress:""},uploadUrl:f,TRUE:!0,address:[],types:[{label:"男",value:1},{label:"女",value:0}]}},computed:r()({},Object(c.c)("user",["userInfo","cityOptions"])),created:function(){this.initInfo()},methods:{cardPicSuccess:function(e,t){this.info.avator=e.data.imageUrl},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"||"image/gif",n=e.size/1024/1024<5;return t||this.$message.error("上传图片只能是 JPG 格式!"),n||this.$message.error("上传图片大小不能超过 5MB!"),t&&n},initInfo:function(){var e=this,t=this.userInfo.userId;Object(l.m)(t).then(function(t){e.info.userName=t.data.userName,e.info.avator=t.data.avator,e.info.gender=t.data.gender,e.info.acceptAddress=t.data.acceptAddress,e.info.introduction=t.data.introduction,e.info.phone=t.data.phone})},check:function(){var e=this;this.$confirm("确认修改信息吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(t){var n=e.info,a=e.address;n.userId=e.userInfo.userId,n.acceptAddress=""+a.join("")+n.acceptAddress,Object(l.p)(JSON.parse(i()(n))).then(function(t){1===t.code?(e.$message({type:"success",message:"修改成功!"}),e.initInfo()):e.$message({type:"error",message:"修改失败!"})})}).catch(function(){console.log("取消修改信息")})}}},p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"profile"},[n("h1",[e._v("基本信息")]),e._v(" "),n("el-form",{attrs:{"label-position":"right","label-width":"150px",size:"small",model:e.info}},[n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{model:{value:e.info.userName,callback:function(t){e.$set(e.info,"userName",t)},expression:"info.userName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"性别"}},[n("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.info.gender,callback:function(t){e.$set(e.info,"gender",t)},expression:"info.gender"}},e._l(e.types,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"简介"}},[n("el-input",{model:{value:e.info.introduction,callback:function(t){e.$set(e.info,"introduction",t)},expression:"info.introduction"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"收货地址"}},[e.info.acceptAddress?e._e():n("el-cascader",{staticClass:"address",attrs:{options:e.cityOptions,"change-on-select":""},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),e._v(" "),n("el-input",{staticClass:"acceptAddress",model:{value:e.info.acceptAddress,callback:function(t){e.$set(e.info,"acceptAddress",t)},expression:"info.acceptAddress"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"头像"}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,name:"image","with-credentials":e.TRUE,"show-file-list":!1,drag:e.TRUE,"on-success":e.cardPicSuccess,"before-upload":e.beforeAvatarUpload}},[e.info.avator?n("img",{staticClass:"avatar",attrs:{src:e.info.avator,width:"100"}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),n("el-form-item",{attrs:{label:"手机"}},[n("el-input",{attrs:{disabled:""},model:{value:e.info.phone,callback:function(t){e.$set(e.info,"phone",t)},expression:"info.phone"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.check}},[e._v("修改")])],1)],1)],1)},m=[],v={render:p,staticRenderFns:m},h=v,g=n("VU/8"),b=a,x=g(u,h,!1,b,null,null);t.default=x.exports}});